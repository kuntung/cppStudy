# staffGovSystem
## 基于多态的职工管理系统设计
公司中职工分为三类：普通员工、经理、老板，显示信息时，需要显示职工编号、
职工姓名、岗位、职责

普通员工职责：完成经理交给的任务

经理职责：完成老板交给的任务，并下发任务给员工

老板职责：管理公司所有事物

## 管理系统中需要实现的功能：

1. 退出管理程序：退出当前管理系统
2. 增加职工信息：实现批量添加职工功能，将信息录入到文件中，职工信息为：
职工编号、姓名、部门编号
3. 显示职工信息：显示公司内部所有职工的信息
4. 删除离职员工：按照编号删除指定的员工
5. 修改职工信息：按照编号修改职工个人信息
6. 查找职工信息：按照职工的编号或者职工的姓名进行查找
7. 按照编号排序：按照职工编号，进行排序，排序规则由用户指定
8. 清空所有文档：清空文件中记录的所有职工信息（请空前需再次确认，防止误删）

## 实现流程
1. 创建管理类
2. 菜单功能
3. 退出功能
4. 创建职工类
5. 添加职工
6. 文件交互-写文件
7. 文件交互-读文件
8. 显示职工
9. 删除职工
10. 修改职工
11. 查找职工
12. 排序
13. 清空文件

## 添加职工
功能描述：批量添加职工，并且保存到文件中
### 功能分析
用户在批量创建时，可能会创建不同种类的职工

如果想将所有不同种类的员工都放入到一个数组中，可以`将所有员工的指针维护到一个
数组里`

如果想在程序中，维护这个不定长度的数组，可以将`数组创建到堆区`，并利用
`Worker**`的指针维护**利用父类指针**
![img_2.png](source/addWorker.jpg)

## 文件交互-读文件
功能描述：将文件中的内容读取到程序中

虽然我们实现了添加职工后保存到文件的操作，但是每次开始运行程序，并
没有将文件中的数据读取到程序中

而我们的程序功能还有清空文件的需求。

因此，构造函数初始化数据的情况分为三种
1. 第一次使用，文件未创建
2. 文件存在，但是数据被用户清空
3. 文件存在，并且保存职工的所有数据

### 如何判断一个文件为空
```cpp
//判断一个文件存在，但是为空
char ch;
ifs >> ch; 
if(ifs.eof()){
    cout << "文件为空" << endl;
}
```

## 删除职工
要求实现按照`职工编号`或者`姓名`进行删除职工操作
###分析
很多功能都需要根据职工是否存在来进行操作：删除职工、修改职工、查找职工

因此需要添加公告函数，以便后续调用

在workerManager.h中添加成员函数`int IsExit(int id);`
用来返回待查找的职工是否存在，如果存在，则返回其在数组中的位置。
不存在返回`-1`

### 数组中元素删除
数组中元素删除，本质就是数据前移的操作。可以将最后一个数据调用来补空。
然后将数组实际大小减一

## 查找员工
在本案例中，由于职工编号是唯一的，所以可以通过调用`IsExit(id)`来
进行判断是否存在该职工

但是，姓名可能重复，所以需要对整个职工系统的员工姓名进行遍历，
逐个打印所有职工信息

## 按照员工编号进行排序
功能描述：按照职工编号进行排序，排序的顺序由用户指定

### 排序算法实现
1. 选择排序
2. 冒泡排序

## 文件清空操作
1. 对于已经创建的文件，通过打开模式`ios::trunc`，如果存在就删除
文件并重新创建。
2. 对于堆区创建的内存，需要一定的处理操作
```cpp
if( this->m_EmpArray != nullptr){
    for(int i = 0; i < this->m_EmpNum; i++){
        if(this->m_EmpArray[i] ! = nullptr){
            delete this->m_EmpArray[i];
        }
    }
    this->m_EmpNum = 0;
    delete[] this->m_EmpArray;
}
```
# 注意事项
1. 由于很多操作是根据职工编号来进行，所以需要在添加的时候，对于职工
编号是否重复进行判定。